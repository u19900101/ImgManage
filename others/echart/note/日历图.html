<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>日历图</title>
    <script src="echarts.min.js"></script>
     <script src="https://d3js.org/d3.v4.min.js"></script>
</head>

<body>
    <div id="main" style="width:100%;height:400px;"></div>
    <script type="text/javascript">
        var myChart = echarts.init(document.getElementById('main'));

        // 模拟数据
        function getVirtulData(yearFrom,yearTo) {
            // year = year || '2017';
            var date = +echarts.number.parseDate(yearFrom + '-01-01');
            var end = +echarts.number.parseDate(yearTo + '-12-31');
            var dayTime = 3600 * 24 * 1000;
            var data = [];
            for (var time = date; time <= end; time += dayTime) {
                data.push([
                    echarts.format.formatTime('yyyy-MM-dd', time),
                    Math.floor(Math.random() * 10)
                ]);
            }
            return data;
        }

        function getVirtulDataD(yearFrom,yearTo) {
            // data的格式：[时间,数量指标,经纬度]
            // data = [
            //     ['2020-07-01',10,1.3,2.22],
            //     ['2020-08-01',5,1.3,2.22],
            //     ['2020-09-01',0,1.3,2.22],
            //     ['2020-07-01',6,1.3,2.22],
            //     ['2020-10-01',1,1.3,2.22],
            //     ['2021-01-01',10,1.3,2.22],
            //     ['2021-02-01',10,1.3,2.22],
            //     ['2021-03-01',10,1.3,2.22],
            //     ['2021-04-01',10,1.3,2.22]
            // ];
            heatMapData = [
                ['2020-07-01',6],
                ['2020-08-01',10],
                ['2020-09-01',0],
                ['2020-10-01',1],
                ['2021-01-01',4],
                ['2021-02-01',5],
                ['2021-03-01',6],
                ['2021-04-01',7]
            ];

        
          
            
            return data;
        }

        var option = {
            //设置背景
            //   backgroundColor: '#d0d0d0',
            visualMap: {
                // show: true,
                min: 0,
                max: 10,
                inRange: {
                    color: ['#00c602'],
                    opacity: [0, 1]
                },
                controller: {
                    inRange: {
                        opacity: [0, 1]
                    },
                    outOfRange: {
                        color: '#ccc'
                    }
                },
                seriesIndex: [0],
            },
            title: {
                top: 30,
                text: '文章贡献度',
                subtext: '一年内博客提交的数量',
                left: 'center',
                textStyle: {
                    color: '#000'
                }
            },
            // legend: {
            //     top: '30',
            //     left: '100',
            //     data: ['文章数', 'Top 12'],
            //     textStyle: {
            //         // 设置字体颜色
            //         color: '#000'
            //     }
            // },
            calendar: [{
              
                top: 100,
                left: 'center',
                // range: contributeDate,
                range: ['2020-07','2021-05-31'],
                splitLine: {
                    show: true,
                    lineStyle: {
                        // 设置月份分割线的颜色
                        color: '#ea0808',
                        width: 1,
                        type: 'solid'
                    }
                },
                yearLabel: { show: true },
                dayLabel: {
                    nameMap: ["日", "一", "二", "三", "四", "五", "六"], // 设置中文显示
                    textStyle: {
                        // 设置周显示颜色
                        color: '#000'
                    },
                    firstDay: 7 // 从周一开始
                },
                monthLabel: {
                    nameMap: 'cn', // 设置中文显示
                    textStyle: {
                        // 设置月显示颜色
                        color: '#000'
                    }
                },
                // orient: 'vertical',
                itemStyle: {
                    normal: {
                        // 设置背景颜色
                        color: '#ffffff',
                        borderWidth: 5,
                        // 设置方块分割线段颜色
                        borderColor: 'rgba(211,211,211,0)'
                    }
                }
            }],
            tooltip: {
                trigger: 'item',
                formatter: function (params) {
                    return ('时间：' + params.value[0] + '<br>文章数：' + params.value[1])
                }
            },
          
            series:[ {
                type: 'heatmap',
                name: '数量',    
                coordinateSystem: 'calendar',
                data: getVirtulDataD(2020,2021)
            },
            {
                type: 'heatmap',
                name: '数量',    
                coordinateSystem: 'calendar',
                data: heatMapData
            }
        
        ]
        };
        myChart.setOption(option);
        myChart.on('click', function (params) {

            // console.log(params);
            console.log("时间:",params.value[0],"大小：",params.value[1],"坐标x：",params.value[2],"y: ",params.value[3]);
    
            // window.open('https://www.baidu.com/s?wd=' + encodeURIComponent(params.name));
        });
    </script>
</body>

</html>